(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function c(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(n){if(n.ep)return;n.ep=!0;const t=c(n);fetch(n.href,t)}})();async function N(e,o){const c="https://raw.githubusercontent.com/deniszholob/icons-factorio/refs/heads/main/factorio-icons";return fetch(e).then(r=>r.json()).then(r=>Object.entries(r).map(([n,t])=>({key:n,path:$(c)+t}))).catch(r=>{o.innerHTML=`<p class='text-red-500'>Failed to load icons from ${e}.</p>`,console.error("Failed to load manifest.json",r)})}function $(e){const o=e.split("/");return o.pop(),o.join("/")+"/"}function L(e){return e.charAt(0).toUpperCase()+e.slice(1)}function y(e){return e.replace(/[-_]/g," ").split(" ").map(L).join(" ")}function B(e){const o=e.split("_").slice(1).join("_");return L(o.replace(/\.[^/.]+$/,"").replace(/[-_]/g," "))}function x(e){if(e.indexOf("_")===-1)return"Ungrouped";const c=e.split("_");return c.length<=1?y(c[0]):c.slice(0,-1).map(y).join(" â†’ ")}let v="",I=[];async function m(e,o,c,r,n,t){console.log("renderManifest",r,n),r!==v&&(I=await N(r,e)??[],v=r),O(e,o,c,I,n,t)}function O(e,o,c,r,n,t){console.log("renderIcons",r,n),e.innerHTML="",o.innerHTML="";const s=r.filter(i=>i.key.toLowerCase().includes(n.toLowerCase())),a=new Map;for(const i of s){const l=t?x(i.key):"All";a.has(l)||a.set(l,[]),a.get(l).push(i)}c.textContent=`${s.length} / ${r.length}`;const u=[...a.entries()].sort(),h=document.createDocumentFragment(),w=document.createDocumentFragment();u.forEach(([i,l])=>{w.appendChild(P(i,l.length));const T=C(i),g=document.createElement("section");g.id=T;const d=document.createElement("details");d.open=!0,d.className="bg-gray-800 rounded overflow-hidden";const f=document.createElement("summary");f.textContent=`${i} (${l.length})`,f.className="cursor-pointer text-lg font-semibold text-white p-4 bg-gray-700",d.appendChild(f);const p=document.createElement("div");p.className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4 p-4";const E=document.createDocumentFragment();l.forEach(M=>E.appendChild(F(M))),p.appendChild(E),d.appendChild(p),g.appendChild(d),h.appendChild(g)}),o.appendChild(w),e.appendChild(h)}function C(e){return`section-${e.replace(/\s+/g,"-")}`}function P(e,o){const c=C(e),r=document.createElement("a");return r.href=`#${c}`,r.textContent=`${e} (${o})`,r.className="block hover:underline",r.addEventListener("click",n=>{n.preventDefault();const t=document.getElementById(c),s=t==null?void 0:t.querySelector("details");s&&!s.open&&(s.open=!0),t==null||t.scrollIntoView({behavior:"smooth",block:"start"})}),r}function F({key:e,path:o}){const c=B(e),r=x(e),n=document.createElement("div");n.className="flex flex-col items-center text-center text-sm";const t=document.createElement("a");t.href=o,t.target="_blank",t.rel="noopener noreferrer";const s=document.createElement("img");s.src=o,s.alt=e,s.title=o,s.className="w-16 h-16 object-contain bg-gray-700 p-1 rounded shadow-md shadow-gray-900 hover:bg-gray-600",t.appendChild(s);const a=document.createElement("div");return a.className="mt-2",a.innerHTML=`<div class="font-medium">${c}</div><div class="text-xs text-gray-400">${r}</div>`,n.appendChild(t),n.appendChild(a),n}function k(){console.log("main"),document.addEventListener("DOMContentLoaded",async()=>{await j()})}async function j(){console.log("setUpPage");const e=document.getElementById("manifest-url");if(!e)throw new Error("search element is undefined");if(!(e instanceof HTMLInputElement))throw new Error("toggle is not a checkbox");const o=document.getElementById("search");if(!o)throw new Error("search element is undefined");if(!(o instanceof HTMLInputElement))throw new Error("toggle is not a checkbox");const c=document.getElementById("group-toggle");if(!c)throw new Error("toggle element is undefined");if(!(c instanceof HTMLInputElement))throw new Error("toggle is not a checkbox");const r=document.getElementById("group-toggle-all");if(!r)throw new Error("off element is undefined");const n=document.getElementById("group-toggle-grouped");if(!n)throw new Error("on element is undefined");const t=document.getElementById("total-count");if(!t)throw new Error("search element is undefined");const s=document.getElementById("icon-container");if(!s)throw new Error("container element is undefined");const a=document.getElementById("toc");if(!a)throw new Error("toc element is undefined");const u=document.getElementById("scroll-to-top");if(!u)throw new Error("scroll-top element is undefined");u.addEventListener("click",()=>{s.scrollIntoView({behavior:"smooth",block:"start"})}),c.addEventListener("change",async()=>{await b(c,n,r),await m(s,a,t,e.value,o.value,c.checked)}),o.addEventListener("input",async()=>{await m(s,a,t,e.value,o.value,c.checked)}),e.addEventListener("change",async()=>{await m(s,a,t,e.value,o.value,c.checked)}),await b(c,n,r),await m(s,a,t,e.value,o.value,c.checked)}function b(e,o,c){e.checked?(o.classList.add("bg-orange-600"),c.classList.remove("bg-orange-800")):(o.classList.remove("bg-orange-600"),c.classList.add("bg-orange-800"))}k();
